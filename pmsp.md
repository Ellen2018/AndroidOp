
UI适配是项目优化点之一，学习向导:  

- Android系统原生适配方案原理  
&emsp;&emsp;问题一:dp & sp 等如何转化为px的？   
&emsp;&emsp;问题二:为什么Android系统原生的方案不完美？  
- 有哪些市面上比较牛的方案？

这里笔者贴上一个写的非常不错的文章[Android 目前最稳定和高效的UI适配方案](https://www.jianshu.com/p/a4b8e4c5d9b0?tdsourcetag=s_pcqq_aiomsg)  

Android的dp单位只是谷歌的UI适配算法，但是这种算法对于现在机型屏幕大小 & 分辨率那么多的情况下，并不是非常完美，因此我们在学习如何适配之前，我们先来熟悉一下谷歌适配db的原理，它是如何转化为像素px的呢？只有完全了解这个过程，完美才能设计出比较完好的方案进行适配。

## Android系统原生适配原理

>问题:
>  
- 1.dp & sp 等如何转化为px的？  
- 2.为什么这套方案不太完美？

### 问题一:dp & sp 等如何转化为px的？  

[了解Android中屏幕单位(请仔细阅读本篇文章)](https://www.cnblogs.com/Sir-Lin/p/7841233.html)  

从上面文章中我们可以得出:

    px = (dpi / 160) * dp

那么dpi如何计算的呢？dpi的计算与手机的分辨率以及屏幕大小有关，比如现在有个手机，它的分辨率是1080×1920,单位是px,并且屏幕大小为5寸，dpi指的是每英寸的像素点个数，我们都知道手机的屏幕大小5寸实际上就是指手机对角线的长度为5寸，我们只需要求出对角线的像素点个数，然后再除以尺寸个数，即可得到dpi的值。如下如所示:  

![](https://oscimg.oschina.net/oscnet/up-5cf90f54ab5b1fe2c79b3bfb4b64a3c3fcf.png)

因此最终计算出在屏幕大小为5寸，分辨率为1080(px)×1920(px)的手机上，它每dp的像素点个数 = (440 dpi / 160) * dp = 2.75px

### 问题二:为什么Android系统原生的方案不完美？

我们来举个栗子，比如现在有两个手机，分辨率都是1080(px)×1920(px),手机1的屏幕大小为5寸，手机2的屏幕大小是6寸，我这里有个控件，它在相对布局下，现在布局中有个控件宽高均为100dp： 

- 那么对于手机1而言,它每dp占2.75px,也就说，最终这个控件在手机1上显示的最终的宽高为275×275
- 对于手机2而言，它每dp约占2.3px,也就是说最终这个控件的最终宽高为230×230

可以看出差别竟然相差了40多个像素点，也许你觉得没什么区别。那么我们为控件换个长宽，将宽高设置为400dp:  

- 对于手机1而言，可以计算出，它最终的宽高为1100×1100，很明显宽已经超过了1080，所以它宽度会占满横屏，也就是它的最终宽高为1080×1100。  
- 对于手机2而言,可以计算出,它的最终宽高为920×920

很明显在手机2上这个控件的宽并没有占满横屏，所以手机2和手机1之间出现了很明显的差异。

## 那些很好的适配方案  

- [今日头条屏幕适配方案终极版正式发布!](https://www.jianshu.com/p/4aa23d69d481)  
  [GitHub地址:AndroidAtuoSize](https://github.com/JessYanCoding/AndroidAutoSize) 


 